---
layout: post
title:  "第1章 深入Web请求过程"
date:   2017-05-14 21:44:27
categories: 《深入分析Java Web技术内幕》
---

# 第1章 深入Web请求过程

## C/S vs B/S
- Client/Server
- Browser/Server

### Client / Server

C/S架构是比较早期的应用架构，出现的早期主要应用在局域网内，经典的架构模型是`两层C/S架构`。

![](/images/2017-05-22-00-07-37.jpg)

- 第一层，客户端层运行于客户段，常作为桌面应用程序，用来处理可视化展现和业务逻辑。
- 第二层，服务端层主要的作用常是数据库服务器，处理数据存储和事物管理。

#### C/S架构的优缺点
优点：
- 客户端与服务端通过网络直接相连，在安全上有更好的`控制力`
- 使用`胖客户端模式`，可以承担更多的业务逻辑
- 充分利用操作系统提供的api，提供更加`丰富的操作界面`

缺点：
- 客户端的`通用型差`，不同的操作系统常常需要独立开发，java开发的客户端虽然可以跨平台但是其界面一直无法达到原生api的水平。
- 客户端的`安装、部署、升级`存在困难，包括预置条件的准备、客户端的网络环境、防火墙配置、升级时的补丁安装等。
- 通信协议常常使用自定义的应用层协议，`开发成本和维护成本`居高不下。

### Browser ／ Server
B/S架构是以`浏览器`作为客户端，使用标准的`HTTP`作为通信协议与服务端进行通信，为用户提供服务。

相对于C／S架构的优点：

- B／S架构的普及是伴随着互联网的快速发展，大量的用户涌入，千奇百怪的客户端工作环境，导致C/S架构下的`客户端开发难度`倍增。
- 在互联网模式下，用户很难有耐心去准备环境、下载并安装应用，导致C/S模式的系统难以推广，而B/S架构下，新用户的快速接入往往只需要一个URL。
- C/S客户端往往是自定义的，使用时存在一定的`学习成本`，而B/S架构下，客户端运行在浏览器中，操作界面和操作模式的`可继承性`非常强。
- B/S架构下服务端和客户端的开发都是基于标准的协议、标准化的客户端运行环境、成熟的服务端技术体系，开发和维护成本大大降低

## B/S架构

### B/S架构的特点
- 基于`无状态`的HTTP协议，请求通常都是`短链接`
- 既要满足`海量用户`的访问需求，又要`快速响应`

![](/images/2017-05-22-23-13-43.jpg)

#### 发起请求：HTTP请求本质上是一个Socket链接，通过输出流发出请求，通过输入流获取响应，只是遵循了HTTP协议的格式。
#### Header：控制浏览器的渲染行为和服务器的执行逻辑。

> https://zh.wikipedia.org/wiki/HTTP%E5%A4%B4%E5%AD%97%E6%AE%B5%E5%88%97%E8%A1%A8

- 请求头
- 响应头
- 响应状态码

![](/images/2017-05-22-23-29-32.jpg)



